
// Html.h

#ifndef HTML_H
#define HTML_H

const char DOCS_HTML[] PROGMEM = "<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta name=viewport content=\"width=device-width,initial-scale=1,shrink-to-fit=no\"> <link rel=icon type=image/png href=https://image.ibb.co/fxD5An/favicon2.png> <link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous> <link href=\"http://fonts.googleapis.com/css?family=Cookie\"rel=stylesheet type=text/css> <style>body{background:#000;font:400 17px/1.5 \"Comic Sans MS\",cursive,sans-serif}.list-group-item{background:#444;color:#ff0}.list-group-item.active{background-color:#ffc107;border-color:#aed248;color:#fff}.jumbotron{margin-top:20px;background-color:#222;border-color:#aed248;color:#ff0}</style> <title>Docs</title> </head> <body> <main class=container-fluid> <div class=jumbotron> <h1>REST API</h1><br> <div class=row> <div class=col-4> <div class=list-group id=list-tab-api role=tablist> <a class=\"list-group-item list-group-item-action active\"id=list-home-list data-toggle=list href=#list role=tab aria-controls=list>/</a> <a class=\"list-group-item list-group-item-action\"id=list-settings-list data-toggle=list href=#list-docs role=tab aria-controls=list-docs>/docs</a> <a class=\"list-group-item list-group-item-action\"id=list-profile-list data-toggle=list href=#list-api-lamp role=tab aria-controls=profile>/api/lamp</a> <a class=\"list-group-item list-group-item-action\"id=list-messages-list data-toggle=list href=#list-api-lamp-set role=tab aria-controls=messages>/api/lamp/set</a> <a class=\"list-group-item list-group-item-action\"id=list-settings-list data-toggle=list href=#list-api-lamp-toggle role=tab aria-controls=settings>/api/lamp/toggle</a> <a class=\"list-group-item list-group-item-action\"id=list-profile-list data-toggle=list href=#list-api-wifi role=tab aria-controls=profile>/api/wifi</a> <a class=\"list-group-item list-group-item-action\"id=list-home-list data-toggle=list href=#list-api-mqtt role=tab aria-controls=home>/api/mqtt</a> <a class=\"list-group-item list-group-item-action\"id=list-messages-list data-toggle=list href=#list-api-restart role=tab aria-controls=messages>/api/restart</a> </div> </div> <div class=col-8> <div class=tab-content id=nav-tabContent-api> <div class=\"tab-pane fade show active\"id=list role=tabpanel aria-labelledby=list-home-list>displays lamp homepage</div> <div class=\"tab-pane fade\"id=list-docs role=tabpanel aria-labelledby=list-settings-list>docs page</div> <div class=\"tab-pane fade\"id=list-api-lamp role=tabpanel aria-labelledby=list-profile-list>returns json object with status and level property, where level is current lamp level</div> <div class=\"tab-pane fade\"id=list-api-lamp-set role=tabpanel aria-labelledby=list-messages-list>when arg \"level\" provided, sets lamp to desired level, level has to be integer with value &lt;0, 3&gt;</div> <div class=\"tab-pane fade\"id=list-api-lamp-toggle role=tabpanel aria-labelledby=list-settings-list>levels up lamp, when level excedes 3 then cycles to 0</div> <div class=\"tab-pane fade\"id=list-api-wifi role=tabpanel aria-labelledby=list-profile-list>when args \"ssid\" and \"password\" are provided, sets it. SSID and password have to be no longer than 64 characters. If SSID is set to empty string then on next boot lamp will start in AP_MODE. All changes to wifi settings are applied after reboot. Returns JSON object with wifi settings.</div> <div class=\"tab-pane fade\"id=list-api-mqtt role=tabpanel aria-labelledby=list-home-list> when arg \"mqtt_host\" provided, sets mqtt hostname. Hostname has to be no longer than 64 characters. If hostname is set to empty string then mqtt funcionality is disabled. All changes to mqtthost are applied after reboot<br> Returns json object with keys:<br> \"mqtt_host\" - currently used mqtt hostname<br> \"mqtt_enabled\" - if this is set to \"no\" then lamp wouldn't try to connect to mqtt broker <br> \"mqtt_connected\" - returns \"yes\" if is connected to mqtt broker \"mqtt_state\" - returns connection state to mqtt broker </div> </div> <div class=\"tab-pane fade\"id=list-api-restart role=tabpanel aria-labelledby=list-messages-list>restarts lamp</div> </div> </div> </div>  <div class=jumbotron> <h1>MQTT topics</h1><br> <div class=row> <div class=col-4> <div class=list-group id=list-tab-mqtt role=tablist> <a class=\"list-group-item list-group-item-action active\"id=list-home-list data-toggle=list href=#inbox-deviceInfo role=tab aria-controls=inbox-deviceInfo>/inbox/xdlamp/deviceInfo</a> <a class=\"list-group-item list-group-item-action\"id=list-profile-list data-toggle=list href=#outbox-deviceInfo role=tab aria-controls=outbox-deviceInfo>home/xdlamp/toggle</a> </div> </div> <div class=col-8> <div class=tab-content id=nav-tabContent-mqtt> <div class=\"tab-pane fade show active\"id=list-home role=tabpanel aria-labelledby=list-home-list>sets lamp to desired level, in payload should be number between 0 and 3</div> <div class=\"tab-pane fade\"id=list-profile role=tabpanel aria-labelledby=list-profile-list>same behavior as in rest api \"/lamp/toggle\", payload is ignored</div> </div> </div> </div> </div> <button type=button class=\"btn btn-secondary btn-lg btn-block btn-warning no-margin top-buffer\"onclick='location.href=\"/\"'>Return</button> </main> <script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script> <script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script> </body></html>";
const char INDEX_HTML[] PROGMEM = "<!DOCTYPE html> <html lang=en> <head> <meta name=author content=\"Dominik Hofman\"> <meta name=description content=\"Best lampka device\"> <meta charset=utf-8> <meta name=viewport content=\"width=device-width,initial-scale=1,shrink-to-fit=no\"> <link rel=icon type=image/png href=https://image.ibb.co/dzHoGz/favicon2.png> <link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous> <link href=\"http://fonts.googleapis.com/css?family=Cookie\"rel=stylesheet type=text/css> <style>.raise:focus,.raise:hover{box-shadow:0 .5em .5em -.4em var(--hover);-webkit-transform:translateY(-.25em);transform:translateY(-.25em)}.raise{--color:#ffa260;--hover:#e5ff60}.xd{background:#555}.no-margin{margin-top:0;margin-bottom:0;margin-right:0;margin-left:0}.modal-style{background-color:#444}h5{color:#ffc107}body{color:#fff;background:#000;font:400 17px/.8 \"Comic Sans MS\",cursive,sans-serif;padding-right:20px}.top-buffer{margin-top:20px}button{color:var(--color);-webkit-transition:.25s;transition:.25s;background:0 0;border:2px solid;line-height:1;margin:.5em;padding:1em 2em;color:#ffc107;text-shadow:4px 4px 3px rgba(0,0,0,.1)}button:focus,button:hover{border-color:var(--hover);color:#fff}h1{color:#ffc107;text-shadow:4px 4px 3px rgba(0,0,0,.1)}.xd-button{width:100%}</style> <title>Let's make lampka xD again</title> </head> <body> <main class=container-fluid> <div id=alert class=\"alert top-buffer\"role=alert> </div> <div class=\"col-12 text-center\"> <img id=light src=https://image.ibb.co/cJTjpK/wait.png alt=\"light level image\"class=img-responsive> </div> <div class=row> <div class=\"col text-center top-buffer\"> <h1>Let's make lampka xD again</h1> </div> </div> <div class=\"row justify-content-center\"> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-1\"> <button id=lv0 class=\"xd-button raise\">xd</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-1\"> <button id=lv1 class=\"xd-button raise\">xD</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-1\"> <button id=lv2 class=\"xd-button raise\">XD</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-1\"> <button id=lv3 class=\"xd-button raise\">XDDD</button> </div> </div> <div class=row> <div class=\"col top-buffer text-center\"> <a href=# data-toggle=collapse data-target=#settings class=text-muted>.xX settings Xx.</a> </div> </div> <div id=settings class=\"row top-buffer justify-content-center text-center collapse\"> <div class=\"row justify-content-center\"> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-2\"> <button id=wifibtn type=button class=\"xd-button btn btn-warning btn-lg\">Wifi Settings</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-2\"> <button id=mqttbtn type=button class=\"xd-button btn btn-warning btn-lg\">Mqtt Settings</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-2\"> <button id=docsbtn type=button class=\"xd-button btn btn-warning btn-lg\">Docs</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-2\"> <button id=restartbtn type=button class=\"xd-button btn btn-danger btn-lg\">Restart</button> </div> <div class=\"col-xs-12 col-sm-6 col-md-3 col-lg-2\"> <button id=formatbtn type=button class=\"xd-button btn btn-danger btn-lg\">Format</button> </div> </div> </div> <div class=\"modal fade\"id=wifiModal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <div class=\"modal-body modal-style\"> <h5 class=modal-title>Wifi settings</h5> <table class=\"table table-dark top-buffer\"id=wifiTable> <thead> <tr> <th scope=col>Key</th> <th scope=col>Value</th> </tr> </thead> <tbody> </tbody> </table> <form id=wifiSettingsForm> <div class=\"form-group top-buffer\"> <div class=form-group> <input id=ssid type=text class=form-control placeholder=\"New SSID\"> </div> <input id=password type=text class=form-control placeholder=\"New Password\"> <button id=wifisub type=submit class=\"btn btn-primary btn-lg btn-block btn-warning no-margin top-buffer\">Submit</button> <button type=button class=\"btn btn-secondary btn-lg btn-block btn-warning no-margin top-buffer\"data-dismiss=modal>Close</button> </div> </form> </div> </div> </div> </div> <div class=\"modal fade\"id=mqttModal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true> <div class=modal-dialog role=document> <div class=modal-content> <div class=\"modal-body modal-style\"> <h5 class=modal-title>Mqtt settings</h5> <table class=\"table table-dark top-buffer\"id=mqttTable> <thead> <tr> <th scope=col>Key</th> <th scope=col>Value</th> </tr> </thead> <tbody> </tbody> </table> <form id=mqttSettingsForm> <div class=form-group> <input id=mqtthost type=text class=\"form-control top-buffer\"placeholder=\"New Mqtt hostname\"> <input id=mqttport type=text class=\"form-control top-buffer\"placeholder=\"New Mqtt port\"> <input id=mqttusername type=text class=\"form-control top-buffer\"placeholder=\"New Mqtt username\"> <input id=mqttpassword type=text class=\"form-control top-buffer\"placeholder=\"New Mqtt password\"> <button id=mqttsub action=# type=submit class=\"btn btn-primary btn-lg btn-block btn-warning no-margin top-buffer\">Submit</button> <button type=button class=\"btn btn-secondary btn-lg btn-block btn-warning no-margin top-buffer\"data-dismiss=modal>Close</button> </div> </form> </div> </div> </div> </div> </main> <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script> <script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script> <script> // var imgUrls = [\n// \"../img/lv0.png\", // lv0\n// \"../img/lv1.png\", // lv1\n// \"../img/lv2.png\", // lv2\n// \"../img/lv3.png\", // lv3\n// \"../img/error.png\", // error\n// \"../img/wait.png\", // wait\n// ];\n\n// var baseUrl = \"http://192.168.1.4/\";\nlet baseUrl = \"/\";\n\nlet imgUrls = [\n  \"https://image.ibb.co/iQuqUK/lv0.png\", // lv0\n  \"https://image.ibb.co/dQkawz/lv1.png\", // lv1\n  \"https://image.ibb.co/hYHc9K/lv2.png\", // lv2\n  \"https://image.ibb.co/ngyjpK/lv3.png\", // lv3\n  \"https://image.ibb.co/bC2c9K/error.png\", // error\n  \"https://image.ibb.co/cJTjpK/wait.png\", // wait\n];\n\n$(document).ready(function () {\n\n  $(\"#settings\").click(function () {\n    $(\"html, body\").animate({\n      scrollTop: $(document).height()\n    }, \"slow\");\n    return false;\n  });\n\n  $(\"#alert\").hide();\n  $(\"#light\").attr('src', imgUrls[5]);\n\n  $(\"#wifiSettingsForm\").submit(function () {\n    $('#wifiModal').modal('hide');\n    setWifiSettings($('#ssid').val(), $('#password').val());\n    return false;\n  });\n\n  $(\"#mqttSettingsForm\").submit(function () {\n    $('#mqttModal').modal('hide');\n    setMqttSettings({\n      \"mqtt_host\": $('#mqtthost').val(),\n      \"mqtt_port\": $('#mqttport').val(),\n      \"mqtt_username\": $('#mqttusername').val(),\n      \"mqtt_password\": $('#mqttpassword').val(),\n    })\n    return false;\n  });\n});\n\n$(\"#lv0\").click(function () {\n  setLevel(0);\n});\n\n$(\"#lv1\").click(function () {\n  setLevel(1);\n});\n\n$(\"#lv2\").click(function () {\n  setLevel(2);\n});\n\n$(\"#lv3\").click(function () {\n  setLevel(3);\n});\n\n$(\"#light\").click(function () {\n  toggleLamp();\n});\n\n$(\"#restartbtn\").click(function () {\n  restartLamp();\n});\n\n$(\"#formatbtn\").click(function () {\n  formatLamp();\n});\n\n$(\"#mqttbtn\").click(function () {\n  openMqttModal();\n});\n\n$(\"#wifibtn\").click(function () {\n  openWifiModal();\n});\n\n$(\"#docsbtn\").click(function () {\n  location.href = '/docs';\n});\n\n$.ajax({\n  url: baseUrl + \"api/lamp\",\n  success: function (data) {\n    $(\"#lv\" + data.level).first().focus();\n    changeImageLevel(data.level);\n  },\n  error: onError,\n});\n\nfunction successAlert(msg) {\n  $('#alert').removeClass(\"alert-danger\");\n  $('#alert').addClass(\"alert-warning\");\n  $('#alert').html(\"<strong>Success!</strong> \" + msg)\n  $(\"#alert\").fadeTo(2000, 500).slideUp(500, function () {\n    $(\"#alert\").slideUp(500);\n  });\n}\n\nfunction createTable(id, data) {\n  $(\"#\" + id + \" tbody tr\").remove();\n  for (key in data) {\n    // check if the property/key is defined in the object itself, not in parent\n    if (data.hasOwnProperty(key)) {\n      if (key == \"status\") continue;\n      tableAddRow(id, key, data[key]);\n    }\n  }\n}\n\nfunction tableAddRow(id, key, value) {\n  $('#' + id + ' > tbody:last-child').append('<tr><td>' + key + '</td><td>' + value + '</td></tr>');\n}\n\nfunction errorAlert(msg) {\n  $('#alert').removeClass(\"alert-warning\");\n  $('#alert').addClass(\"alert-danger\");\n  $('#alert').html(\"<strong>Error!</strong> \" + msg)\n  $(\"#alert\").fadeTo(2000, 500).slideUp(500, function () {\n    $(\"#alert\").slideUp(500);\n  });\n}\n\nfunction openMqttModal() {\n  $.ajax({\n    url: baseUrl + \"api/mqtt\",\n    success: function (data) {\n      createTable(\"mqttTable\", data);\n      $('#mqtthost').val(data.mqtt_host);\n      $('#mqttport').val(data.mqtt_port);\n      $('#mqttusername').val(data.mqtt_username);\n      $('#mqttpassword').val(data.mqtt_password);\n      $('#mqttModal').modal('show');\n    },\n    error: onError,\n  });\n}\n\nfunction openWifiModal() {\n  $.ajax({\n    url: baseUrl + \"api/wifi\",\n    success: function (data) {\n      createTable(\"wifiTable\", data);\n      $('#ssid').val(data.ssid);\n      $('#password').val(data.password);\n      $('#wifiModal').modal('show');\n    },\n    error: onError,\n  });\n}\n\n\nfunction setMqttSettings(data) {\n  $.ajax({\n    type: \"POST\",\n    url: baseUrl + \"api/mqtt\",\n    data: data,\n    success: function (data) {\n      successAlert(\"Mqtt host has been updated!\");\n    },\n    error: onError,\n  });\n}\n\nfunction setWifiSettings(ssid, password) {\n  $.ajax({\n    type: \"POST\",\n    url: baseUrl + \"api/wifi\",\n    data: {\n      \"ssid\": ssid,\n      \"password\": password\n    },\n    success: function (data) {\n      successAlert(\"Wifi settings have been updated!\");\n    },\n    error: onError,\n  });\n}\n\nfunction restartLamp() {\n  $.ajax({\n    url: baseUrl + \"api/restart\",\n    success: function (data) {\n      location.reload();\n    },\n    error: onError,\n  });\n}\n\nfunction formatLamp() {\n  $.ajax({\n    url: baseUrl + \"api/format\",\n    success: function (data) {\n      successAlert(\"Lamp formatted!\");\n    },\n    error: onError,\n  });\n}\n\nfunction setLevel(lv) {\n  $.ajax({\n    type: \"POST\",\n    url: baseUrl + \"api/lamp/set\",\n    data: {\n      \"level\": lv\n    },\n    success: function (data) {\n      $(\"#lv\" + data.level).first().focus();\n      changeImageLevel(data.level);\n    },\n    error: onError,\n  });\n}\n\nfunction toggleLamp() {\n  $.ajax({\n    url: baseUrl + \"api/lamp/toggle\",\n    success: function (data) {\n      $(\"#lv\" + data.level).first().focus();\n      changeImageLevel(data.level);\n    },\n    error: onError,\n  });\n}\n\n\nfunction changeImageLevel(lv) {\n  $(\"#light\")\n    .fadeOut(200, function () {\n      $(\"#light\").attr('src', imgUrls[lv]);\n    })\n    .fadeIn(200);\n}\n\nfunction onError(obj, type, except) {\n  if (obj.hasOwnProperty('error')) {\n    errorAlert(obj.responseJSON.error);\n  } else {\n    console.log(obj);\n  }\n  changeImageLevel(4);\n} </script> </body> </html>";

#endif
